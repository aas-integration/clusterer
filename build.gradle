def lib_dir = new File('lib/')
if (!lib_dir.exists()) {
	lib_dir.mkdirs()
}

def soot_jar = new File('lib/soot-trunk.jar')
//if (!soot_jar.exists()) {
//	println "downloading soot"
//    new URL('https://ssebuild.cased.de/nightly/soot/lib/soot-trunk.jar').withInputStream{ i -> soot_jar.withOutputStream{ it << i }}
//}


repositories {
	mavenCentral()
}

apply plugin: 'java'
apply plugin: 'eclipse'
//apply plugin: 'findbugs'

//global properties
def version = '1.0'
jar.archiveName = 'clusterer.jar'
sourceCompatibility = 1.8

dependencies {
	compile 'args4j:args4j:2.32'
	compile fileTree(dir: 'lib', include: '*.jar')
    testCompile 'junit:junit:4.12'
}

// building the jar ---------------------
jar {
    manifest {
        attributes 'Main-Class': "clusterer.ClusterGenerator",
                   'Class-Path': '.',
                   'Implementation-Title': 'Clusterer',
                   'Implementation-Version': "$version"
    }
    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}



